<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Value Labels and Codelists</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Value Labels and Codelists</h1>



<p>DDI uses the term codebook on the level of file (survey), and we use
it on the level of individual observations. Because normally we want to
use standardized codes, and we started to harmonize with the SDMX
statistical metadata standard, a good resolution seems to be to
differentiate between a Codebook (DDI term) and a Codelist (SDMX term,
but I am sure it has a more general RDF definition.)</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(retroharmonize)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(statcodelists)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co">#&gt; Warning: package &#39;statcodelists&#39; was built under R version 4.5.2</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co">#&gt; Warning: package &#39;knitr&#39; was built under R version 4.5.2</span></span></code></pre></div>
<p>The idea of value label or codelist harmonization is that for example
the Marital (Civil) status variable’s codes are always
<code>8=&quot;Single liv w partner: childr this/prev union&quot;</code>. To recall
<a href="https://retroharmonize.dataobservatory.eu/articles/concept.html">Harmonizing
Concepts, Questions and Variables</a>., the variable harmonization makes
sure that each survey has a <code>marital status</code> variable.</p>
<p>DDI leaves it to the Question Banks to harmonize the questionnaire
items, and unfortunately this is a very bad idea. Eurobarometer, for
example, consistently uses obsolete region codes and labels. (See below
for example <code>FR23</code>=<code>Haute Normandie</code>). This
creates a lot of tasks for retroharmonize even in nominally ex ante
harmonized survey programs like Eurobarometer or Afrobarometer.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12</span>)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>my_codebook <span class="ot">&lt;-</span> <span class="fu">create_codebook</span>(</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  <span class="at">survey =</span> <span class="fu">read_rds</span>(</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    <span class="fu">system.file</span>(<span class="st">&quot;examples&quot;</span>, <span class="st">&quot;ZA7576.rds&quot;</span>,</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>      <span class="at">package =</span> <span class="st">&quot;retroharmonize&quot;</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    )</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  )</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>)</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="fu">sample_n</span>(my_codebook, <span class="dv">12</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>  <span class="fu">select</span>(.data<span class="sc">$</span>filename,</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>    <span class="co"># Rename variables to DDI Codebook names</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>    <span class="at">Name =</span> .data<span class="sc">$</span>var_name_orig,</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>    <span class="at">Label =</span> .data<span class="sc">$</span>var_label_orig,</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>    .data<span class="sc">$</span>val_code_orig, .data<span class="sc">$</span>val_label_orig</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>  <span class="fu">kable</span>()</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="co">#&gt; Warning: Use of .data in tidyselect expressions was deprecated in tidyselect 1.2.0.</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co">#&gt; ℹ Please use `&quot;filename&quot;` instead of `.data$filename`</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="co">#&gt; This warning is displayed once per session.</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="co">#&gt; Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="co">#&gt; generated.</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="co">#&gt; Warning: Use of .data in tidyselect expressions was deprecated in tidyselect 1.2.0.</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a><span class="co">#&gt; ℹ Please use `&quot;var_name_orig&quot;` instead of `.data$var_name_orig`</span></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="co">#&gt; This warning is displayed once per session.</span></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a><span class="co">#&gt; Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a><span class="co">#&gt; generated.</span></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a><span class="co">#&gt; Warning: Use of .data in tidyselect expressions was deprecated in tidyselect 1.2.0.</span></span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a><span class="co">#&gt; ℹ Please use `&quot;var_label_orig&quot;` instead of `.data$var_label_orig`</span></span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a><span class="co">#&gt; This warning is displayed once per session.</span></span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a><span class="co">#&gt; Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a><span class="co">#&gt; generated.</span></span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a><span class="co">#&gt; Warning: Use of .data in tidyselect expressions was deprecated in tidyselect 1.2.0.</span></span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a><span class="co">#&gt; ℹ Please use `&quot;val_code_orig&quot;` instead of `.data$val_code_orig`</span></span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a><span class="co">#&gt; This warning is displayed once per session.</span></span>
<span id="cb2-36"><a href="#cb2-36" tabindex="-1"></a><span class="co">#&gt; Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span>
<span id="cb2-37"><a href="#cb2-37" tabindex="-1"></a><span class="co">#&gt; generated.</span></span>
<span id="cb2-38"><a href="#cb2-38" tabindex="-1"></a><span class="co">#&gt; Warning: Use of .data in tidyselect expressions was deprecated in tidyselect 1.2.0.</span></span>
<span id="cb2-39"><a href="#cb2-39" tabindex="-1"></a><span class="co">#&gt; ℹ Please use `&quot;val_label_orig&quot;` instead of `.data$val_label_orig`</span></span>
<span id="cb2-40"><a href="#cb2-40" tabindex="-1"></a><span class="co">#&gt; This warning is displayed once per session.</span></span>
<span id="cb2-41"><a href="#cb2-41" tabindex="-1"></a><span class="co">#&gt; Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span>
<span id="cb2-42"><a href="#cb2-42" tabindex="-1"></a><span class="co">#&gt; generated.</span></span></code></pre></div>
<table>
<colgroup>
<col width="9%" />
<col width="5%" />
<col width="34%" />
<col width="11%" />
<col width="38%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">filename</th>
<th align="left">Name</th>
<th align="left">Label</th>
<th align="left">val_code_orig</th>
<th align="left">val_label_orig</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ZA7576.rds</td>
<td align="left">qa6a_4</td>
<td align="left">trust_in_institutions_police</td>
<td align="left">1</td>
<td align="left">Tend to trust</td>
</tr>
<tr class="even">
<td align="left">ZA7576.rds</td>
<td align="left">nuts</td>
<td align="left">region_nuts_codes</td>
<td align="left">TR82</td>
<td align="left">Kastamonu</td>
</tr>
<tr class="odd">
<td align="left">ZA7576.rds</td>
<td align="left">nuts</td>
<td align="left">region_nuts_codes</td>
<td align="left">TR41</td>
<td align="left">Bursa</td>
</tr>
<tr class="even">
<td align="left">ZA7576.rds</td>
<td align="left">nuts</td>
<td align="left">region_nuts_codes</td>
<td align="left">LV005</td>
<td align="left">Latgale</td>
</tr>
<tr class="odd">
<td align="left">ZA7576.rds</td>
<td align="left">nuts</td>
<td align="left">region_nuts_codes</td>
<td align="left">FR23</td>
<td align="left">Haute Normandie</td>
</tr>
<tr class="even">
<td align="left">ZA7576.rds</td>
<td align="left">qa6a_4</td>
<td align="left">trust_in_institutions_police</td>
<td align="left">9</td>
<td align="left">Inap. (CY-TCC in isocntry)</td>
</tr>
<tr class="odd">
<td align="left">ZA7576.rds</td>
<td align="left">nuts</td>
<td align="left">region_nuts_codes</td>
<td align="left">AL033</td>
<td align="left">Gjirokaster</td>
</tr>
<tr class="even">
<td align="left">ZA7576.rds</td>
<td align="left">qa6b_3</td>
<td align="left">trust_in_institutions_united_nations_tcc</td>
<td align="left">3</td>
<td align="left">DK</td>
</tr>
<tr class="odd">
<td align="left">ZA7576.rds</td>
<td align="left">nuts</td>
<td align="left">region_nuts_codes</td>
<td align="left">EL13</td>
<td align="left">Ditiki Makedonia (not coded)</td>
</tr>
<tr class="even">
<td align="left">ZA7576.rds</td>
<td align="left">nuts</td>
<td align="left">region_nuts_codes</td>
<td align="left">BE35</td>
<td align="left">Namur</td>
</tr>
<tr class="odd">
<td align="left">ZA7576.rds</td>
<td align="left">nuts</td>
<td align="left">region_nuts_codes</td>
<td align="left">BE21</td>
<td align="left">Antwerpen</td>
</tr>
<tr class="even">
<td align="left">ZA7576.rds</td>
<td align="left">d7</td>
<td align="left">marital_status</td>
<td align="left">8</td>
<td align="left">Single liv w partner: childr this/prev union</td>
</tr>
</tbody>
</table>
<p>It is beyond the scope of the retroharmonize package to faciliate the
use of correct variable codes, however, this is so desirable that we
started new, CRAN-released packages. It would be desirable if the
regions are coded and labeled in a way that they can be matched with
regional data or placed on a map. While
<code>BE21</code>=<code>Antwerpen</code> had been rather stable in the
last decades, the <code>FR23</code>=<code>Haute Normandie</code> not,
because France had a major regional reform in 2015. (Our regions package
only deals with this particular problem.)</p>
<div id="use-standard-codelists" class="section level2">
<h2>Use standard codelists</h2>
<p>The use of standard codelists facilitates data interoperability and
the production of publication-ready statistical products. The <a href="https://statcodelists.dataobservatory.eu/">statcodelists</a>
package contains the SDMX [published as an ISO International Standard
(ISO 17369)] codelist standards used by major statistical agencies.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(statcodelists)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>CL_SEX</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co">#&gt;   id           name</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co">#&gt; 1  F         Female</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co">#&gt; 2  M           Male</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="co">#&gt; 3 _N   Non response</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co">#&gt; 4 _O          Other</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co">#&gt; 5 _T          Total</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="co">#&gt; 6 _U        Unknown</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co">#&gt; 7 _Z Not applicable</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="co">#&gt;                                                                                                                                                                                                                                                         description</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="co">#&gt; 1                                                                                                                                                                                                                                                              &lt;NA&gt;</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="co">#&gt; 2                                                                                                                                                                                                                                                              &lt;NA&gt;</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="co">#&gt; 3                                                                                                                                                              Failure to obtain a measurement on one or more study variables for one or more elements in a survey.</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="co">#&gt; 4                                            Used to cover residual information not contained in other categories of the code list (in some contexts, e.g. classifications, referred to as n.e.s., not elsewhere specified, n.e.c., not elsewhere classified, etc.)</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="co">#&gt; 5                                                                                                                                                                                                                                       Used for expressing totals.</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="co">#&gt; 6                                                                                                                                       Failure to obtain a measurement (e.g. non response, no data available, information not known by the respondent unit, etc.).</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="co">#&gt; 7 Used in response to a question or a request for information that does not apply to the circumstances of the unit being surveyed. This concept is to be understood as meaning &quot;statistically not applicable&quot;; i.e. _Z is to be used only for statistical purposes.</span></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a><span class="co">#&gt;   name_locale description_locale</span></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a><span class="co">#&gt; 1          en               &lt;NA&gt;</span></span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a><span class="co">#&gt; 2          en               &lt;NA&gt;</span></span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a><span class="co">#&gt; 3          en                 en</span></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a><span class="co">#&gt; 4          en                 en</span></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a><span class="co">#&gt; 5          en                 en</span></span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a><span class="co">#&gt; 6          en                 en</span></span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a><span class="co">#&gt; 7          en                 en</span></span></code></pre></div>
<p>We can generate further codes for non-binary people, using the <a href="https://sdmx.org/sdmx_cdcl/">SDMX Content-Oriented Guidelines
(COG)</a> for the creation of generic and new codelist items.</p>
<p>The problem with the SDMX Codelists is that they are designed for
already aggregated statistical data, and they character codelist
<code>id</code> variables. Survey software and question banks use
integer ids for the same answer options.</p>
<p>For example, the <a href="https://www.icpsr.umich.edu/web/ICPSR/studies/35083/datasets/0001/variables/D10?archive=icpsr">D10
(GENDER)</a> variable of Eurobarometer uses the following coding:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="at">Value =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="at">Label =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>)</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">#&gt;   Value  Label</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co">#&gt; 1     1   Male</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="co">#&gt; 2     2 Female</span></span></code></pre></div>
<p>Furthermore, Eurobarometer often uses characters in the Labels that
should be prohibited because most programming languages or software use
them with a particular meaning. A particularly bad habit is the use of ;
or , (which can be used as column delimiters in files), the $ sign which
is an anchor in regex and a selector in R.</p>
<p>The current retroharmonize normalizes such characters early on, and
this should change. It is not desirable that final, harmonized codelists
use special characters, but for a faithful representation of the
pre-existing data we should keep them.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="at">Value =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">11</span>),</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="at">Label =</span> <span class="fu">c</span>(</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>    <span class="st">&quot;(Re-)Married: without children&quot;</span>, </span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>    <span class="st">&quot;(Re-)Married: children this marriage&quot;</span>,</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    <span class="st">&quot;Divorced/Separated: without children&quot;</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>  ),</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>  <span class="at">Normalized =</span> <span class="fu">c</span>(</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>    <span class="st">&quot;Married or Remarried without children&quot;</span>,</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>    <span class="st">&quot;Married or Remarried with children this marriage&quot;</span>,</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>    <span class="st">&quot;Divorced or Separated without children&quot;</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>  )</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code></pre></div>
<table>
<colgroup>
<col width="6%" />
<col width="40%" />
<col width="53%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">Value</th>
<th align="left">Label</th>
<th align="left">Normalized</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">(Re-)Married: without children</td>
<td align="left">Married or Remarried without children</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">(Re-)Married: children this marriage</td>
<td align="left">Married or Remarried with children this marriage</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="left">Divorced/Separated: without children</td>
<td align="left">Divorced or Separated without children</td>
</tr>
</tbody>
</table>
</div>
<div id="harmonize-labels" class="section level2">
<h2>Harmonize Labels</h2>
<p>The actual harmonization has many potential solutions in
retroharmonize. See: <a href="https://retroharmonize.dataobservatory.eu/articles/harmonize_labels.html">Harmonize
Value Labels</a>.</p>
<p>One suggested workflow is the use of <a href="https://retroharmonize.dataobservatory.eu/articles/crosswalk.html">Working
with a Crosswalk Table</a></p>
</div>
<div id="conceptual-literature-and-documentation-tasks" class="section level2">
<h2>Conceptual, Literature and Documentation tasks</h2>
<ul>
<li><p>Literature review on codelist harmonization. While DDI does not
seem to be focusing on it (maybe wrong), statistical agencies use
standardized codelists, and I am sure they are standardizing the labels
early on, on the questionnaire. Examples: EU-SILC (Panni),
Eurobarometer, Afrobarometer, Arab Barometer (Daniel)</p></li>
<li><p>What is the state of play in DDI about value label harmonization?
Review particularly <a href="https://doi.org/10.5281/zenodo.5180624">Document and Manage
Longitudinal Data</a></p></li>
<li><p>General literature?</p></li>
</ul>
</div>
<div id="codelist-coding" class="section level2">
<h2>Coding tasks</h2>
<ol style="list-style-type: decimal">
<li>We should encourage the use of our pre-existing codelist software,
i.e. <a href="https://regions.dataobservatory.eu/">regions</a> and <a href="https://statcodelists.dataobservatory.eu/">statcodelists</a> with
a new vignette and mentions in the documentation.</li>
<li><code>create_codebook()</code> will be deprecated, luckily, it does
not meet the rOpenSci object_verb suggestion.
<code>codebook_create()</code> will create a DDI-Codebook compatible,
partial codebook on survey level.</li>
<li><code>codelist_create()</code> should be a new function that creates
a codelist which considers <a href="https://sdmx.org/sdmx_cdcl/">SDMX
Content-Oriented Guidelines (COG)</a> and any guidance from DDI on
Question banks, and the DDI Question Construct. The empty function is
now in the <code>codelist.R</code> file, develop the documentation and
the code there.</li>
<li><code>crosswalk_table_create()</code> should be modified in a way
that it builds on <code>create_codebook()</code> and
<code>codelist_create()</code> components. Currently, it does both.</li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
