<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Thomas Klebel" />

<meta name="date" content="2023-08-15" />

<title>Introduction to jstor</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to jstor</h1>
<h4 class="author">Thomas Klebel</h4>
<h4 class="date">2023-08-15</h4>


<div id="TOC">
<ul>
<li><a href="#general-concept" id="toc-general-concept">General
Concept</a></li>
<li><a href="#application" id="toc-application">Application</a>
<ul>
<li><a href="#jst_get_article" id="toc-jst_get_article">jst_get_article</a></li>
<li><a href="#jst_get_authors" id="toc-jst_get_authors">jst_get_authors</a></li>
<li><a href="#jst_get_references" id="toc-jst_get_references">jst_get_references</a></li>
<li><a href="#jst_get_footnotes" id="toc-jst_get_footnotes">jst_get_footnotes</a></li>
<li><a href="#jst_get_full_text" id="toc-jst_get_full_text">jst_get_full_text</a></li>
<li><a href="#combining-results" id="toc-combining-results">Combining
results</a>
<ul>
<li><a href="#matching-with-authors" id="toc-matching-with-authors">Matching with authors</a></li>
<li><a href="#matching-with-references" id="toc-matching-with-references">Matching with references</a></li>
</ul></li>
</ul></li>
<li><a href="#books" id="toc-books">Books</a></li>
</ul>
</div>

<p>The tool <a href="https://www.jstor.org/dfr/">Data for Research
(DfR)</a> by JSTOR is a valuable source for citation analysis and text
mining. <code>jstor</code> provides functions and suggests workflows for
importing datasets from DfR.</p>
<p>When using DfR, requests for datasets can be made for small excerpts
(max. 25,000 records) or large ones, which require an agreement between
the researcher and JSTOR. <code>jstor</code> was developed to deal with
very large datasets which require an agreement, but can be used with
smaller ones as well.</p>
<p>The most important set of functions is a group of
<code>jst_get_*</code> functions:</p>
<ul>
<li><code>jst_get_article</code> (for journal documents and
pamphlets)</li>
<li><code>jst_get_authors</code> (for all sources)</li>
<li><code>jst_get_references</code> (for journal documents)</li>
<li><code>jst_get_footnotes</code> (for journal documents)</li>
<li><code>jst_get_book</code> (for books and research reports)</li>
<li><code>jst_get_chapters</code> (for books and possibly research
reports)</li>
</ul>
<p>I will demonstrate their usage using the <a href="https://www.jstor.org/dfr/about/sample-datasets">sample
dataset</a> which is provided by JSTOR on their website.</p>
<div id="general-concept" class="section level1">
<h1>General Concept</h1>
<p>All functions from the <code>jst_get_*</code> family which are
concerned with meta data operate along the same lines:</p>
<ol style="list-style-type: decimal">
<li>The file is read with <code>xml2::read_xml()</code>.</li>
<li>Content of the file is extracted via XPATH or CSS-expressions.</li>
<li>The resulting data is returned in a tidy <code>tibble</code>.</li>
</ol>
<p>The functions are similar in that all operate on single files
(article, book, research report or pamphlet). Depending on the content
of the file, the output of the functions might have one or multiple
rows. <code>jst_get_article</code> always returns a <code>tibble</code>
with one row: the core meta data (like title, id, or first page of the
article) are single items, and only one article is processed at a time.
Running <code>jst_get_authors</code> for the same article might give you
a tibble with one or multiple rows, depending on the number of authors
the article has. The same is true for <code>jst_get_references</code>
and <code>jst_get_footnotes</code>. If a file has no data on references
(they might still exist, but JSTOR might not have parsed them), the
output is only one row, with missing references. If there is data on
references, each entry gets its own row. Note however, that the number
of rows does not equal the number of references. References usually
start with a title like “References”, which is obviously not a reference
to another article. Be sure to think carefully about your assumptions
and to check the content of your data before you make inferences.</p>
<p>Books work a bit differently. Searching for data on <a href="https://www.jstor.org/dfr/results" class="uri">https://www.jstor.org/dfr/results</a> lets you filter for
books, which are actually book chapters. If you receive data from DfR on
a book chapter, you always get one xml-file with the whole book,
including data on all chapters. Ngram or full-text data for the same
entry however is processed only from single chapters<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>. Thus, the output of
<code>jst_get_book</code> for a single file is similar to the one from
<code>jst_get_article</code>: it is one row with general data about the
book. <code>jst_get_chapters</code> gives you data on all chapters, and
the resulting tibble therefore might have multiple rows.</p>
<p>The following sections showcase the different functions
separately.</p>
</div>
<div id="application" class="section level1">
<h1>Application</h1>
<p>Apart from <code>jstor</code> we only need to load <code>dplyr</code>
for matching records and <code>knitr</code> for printing nice
tables.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(jstor)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(knitr)</span></code></pre></div>
<div id="jst_get_article" class="section level2">
<h2>jst_get_article</h2>
<p>The basic usage of the <code>jst_get_*</code> functions is very
simple. They take only one argument, the path to the file to import:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>meta_data <span class="ot">&lt;-</span> <span class="fu">jst_get_article</span>(<span class="at">file_path =</span> <span class="fu">jst_example</span>(<span class="st">&quot;article_with_references.xml&quot;</span>))</span></code></pre></div>
<p>The resulting object is a <code>tibble</code> with one row and 17
columns. The columns correspond to most of the elements documented here:
<a href="https://www.jstor.org/dfr/about/technical-specifications" class="uri">https://www.jstor.org/dfr/about/technical-specifications</a>.</p>
<p>The columns are:</p>
<ul>
<li>file_name <em>(chr)</em>: The file name of the original .xml-file.
Can be used for joining with other parts (authors, references,
footnotes, full-texts).</li>
<li>journal_doi <em>(chr)</em>: A registered identifier for the
journal.</li>
<li>journal_jcode <em>(chr)</em>: A identifier for the journal like
“amerjsoci” for the “American Journal of Sociology”.</li>
<li>journal_pub_id <em>(chr)</em>: Similar to journal_jcode. Most of the
time either one is present.</li>
<li>article_doi <em>(chr)</em>: A registered unique identifier for the
article.</li>
<li>article_jcode <em>(chr)</em>: A unique identifier for the article
(not a DOI).</li>
<li>article_pub_id <em>(chr)</em>: Infrequent, either part of the DOI or
the article_jcode.</li>
<li>article_type <em>(chr)</em>: The type of article (research-article,
book-review, etc.).</li>
<li>article_title <em>(chr)</em>: The title of the article.</li>
<li>volume <em>(chr)</em>: The volume the article was published in.</li>
<li>issue <em>(chr)</em>: The issue the article was published in.</li>
<li>language <em>(chr)</em>: The language of the article.</li>
<li>pub_day <em>(chr)</em>: Publication day, if specified.</li>
<li>pub_month <em>(chr)</em>: Publication month, if specified.</li>
<li>pub_year <em>(int)</em>: Year of publication.</li>
<li>first_page <em>(int)</em>: Page number for the first page of the
article.</li>
<li>last_page <em>(int)</em>: Page number for the last page of the
article.</li>
</ul>
<p>Since the output from all functions are tibbles, the result is nicely
formatted:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>meta_data <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code></pre></div>
<table>
<colgroup>
<col width="8%" />
<col width="4%" />
<col width="5%" />
<col width="5%" />
<col width="17%" />
<col width="5%" />
<col width="5%" />
<col width="4%" />
<col width="5%" />
<col width="11%" />
<col width="2%" />
<col width="2%" />
<col width="3%" />
<col width="2%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">file_name</th>
<th align="left">journal_doi</th>
<th align="left">journal_jcode</th>
<th align="left">journal_pub_id</th>
<th align="left">journal_title</th>
<th align="left">article_doi</th>
<th align="left">article_pub_id</th>
<th align="left">article_jcode</th>
<th align="left">article_type</th>
<th align="left">article_title</th>
<th align="left">volume</th>
<th align="left">issue</th>
<th align="left">language</th>
<th align="left">pub_day</th>
<th align="left">pub_month</th>
<th align="right">pub_year</th>
<th align="left">first_page</th>
<th align="left">last_page</th>
<th align="left">page_range</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">article_with_references</td>
<td align="left">NA</td>
<td align="left">tranamermicrsoci</td>
<td align="left">NA</td>
<td align="left">Transactions of the American Microscopical Society</td>
<td align="left">10.2307/3221896</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">research-article</td>
<td align="left">On the Protozoa Parasitic in Frogs</td>
<td align="left">41</td>
<td align="left">2</td>
<td align="left">eng</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="right">1922</td>
<td align="left">59</td>
<td align="left">76</td>
<td align="left">59-76</td>
</tr>
</tbody>
</table>
</div>
<div id="jst_get_authors" class="section level2">
<h2>jst_get_authors</h2>
<p>Extracting the authors works in similar fashion:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>authors <span class="ot">&lt;-</span> <span class="fu">jst_get_authors</span>(<span class="fu">jst_example</span>(<span class="st">&quot;article_with_references.xml&quot;</span>))</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">kable</span>(authors)</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="28%" />
<col width="8%" />
<col width="13%" />
<col width="9%" />
<col width="14%" />
<col width="8%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">file_name</th>
<th align="left">prefix</th>
<th align="left">given_name</th>
<th align="left">surname</th>
<th align="left">string_name</th>
<th align="left">suffix</th>
<th align="right">author_number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">article_with_references</td>
<td align="left">NA</td>
<td align="left">R.</td>
<td align="left">Kudo</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>Here we have the following columns:</p>
<ul>
<li><em>file_name</em>: The same as above, used for matching
articles.</li>
<li><em>prefix</em>: A prefix to the name.</li>
<li><em>given_name</em>: The given name of the author
(i.e. <code>Albert</code> or <code>A.</code>).</li>
<li><em>surname</em>: The surname of the author
(i.e. <code>Einstein</code>).</li>
<li><em>string_name</em>: Sometimes instead of given_name and surname,
only a full string is supplied, i.e.: <code>Albert Einstein</code>, or
<code>Einstein, Albert</code>.</li>
<li><em>suffix</em>: A suffix to the name, as in
<code>Albert Einstein, II.</code>.</li>
<li><em>author_number</em>: An integer representing the order of how the
authors appeared in the data.</li>
</ul>
<p>The number of rows matches the number of authors – each author get
its’ own row.</p>
</div>
<div id="jst_get_references" class="section level2">
<h2>jst_get_references</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>references <span class="ot">&lt;-</span> <span class="fu">jst_get_references</span>(<span class="fu">jst_example</span>(<span class="st">&quot;article_with_references.xml&quot;</span>))</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="co"># # we need to remove line breaks for knitr::kable() to work properly for printing</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>references <span class="ot">&lt;-</span> references <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ref_unparsed =</span> stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(ref_unparsed, <span class="st">&quot;</span><span class="sc">\\\n</span><span class="st">&quot;</span>))</span></code></pre></div>
<p>We have two columns:</p>
<ul>
<li><em>file_name</em>: Identifier, can be used for matching.</li>
<li><em>ref_title</em>: The title of the references sections.</li>
<li><em>ref_authors</em>: A string of authors. Several authors are
separated with <code>;</code>.</li>
<li><em>ref_editors</em>: A string of editors, if present.</li>
<li><em>ref_collab</em>: A field that may contain information on the
authors, if authors are not available.</li>
<li><em>ref_item_title</em>: The title of the cited entry.</li>
<li><em>ref_year</em>: A year, often the article’s publication year, but
not always.</li>
<li><em>ref_source</em>: The source of the cited entry. For books often
the title of the book, for articles the publisher of the journal.</li>
<li><em>ref_volume</em>: The volume of the journal article.</li>
<li><em>ref_first_page</em>: The first page of the article/chapter.</li>
<li><em>ref_last_page</em>: The last page of the article/chapter.</li>
<li><em>ref_publisher</em>: For books the publisher, for articles often
missing.</li>
<li><em>ref_publication_type</em>: Known types: book, journal, web,
other.</li>
<li><em>ref_unparsed</em>: The full references entry in unparsed
form.</li>
</ul>
<p>Here I display 5 random entries:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>references <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table>
<colgroup>
<col width="6%" />
<col width="8%" />
<col width="3%" />
<col width="2%" />
<col width="3%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="5%" />
<col width="51%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">file_name</th>
<th align="left">ref_title</th>
<th align="left">ref_authors</th>
<th align="left">ref_collab</th>
<th align="left">ref_item_title</th>
<th align="left">ref_year</th>
<th align="left">ref_source</th>
<th align="left">ref_volume</th>
<th align="left">ref_first_page</th>
<th align="left">ref_last_page</th>
<th align="left">ref_publisher</th>
<th align="left">ref_publication_type</th>
<th align="left">ref_unparsed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">article_with_references</td>
<td align="left">References: Trypanosomes</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">LEBEDEFF, A.1910 Ueber Trypanosoma rotatorium Gruby.
Festschr. 60sten Geburts. RichardHertwigs, 1:397-436, 2 pl., 9
textfig.</td>
</tr>
<tr class="even">
<td align="left">article_with_references</td>
<td align="left">References: Opalinae</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">METCALF, M. M.1909 Opalina. Its anatomy and
reproduction, with a description of infection experi-ments and a
chronological review of the literature. Arch. Protist., 13. 181pp., 15
pl. and 15 textfig.</td>
</tr>
<tr class="odd">
<td align="left">article_with_references</td>
<td align="left">References: Leptotheca ohilmacheri</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">1922 On the morphology and life history of a
Myxosporidian, Leptotheca ohlmacheri,parasitic in Rana clamitans and
Rana pipiens. Parasitology, 14, no. 2.</td>
</tr>
<tr class="even">
<td align="left">article_with_references</td>
<td align="left">References: Trypanosomes</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">BRUMPT, E.1906 Rôle pathoghne et mode de transmission
du Trypanosoma inopinatum Ed. et Et.Sergent. Mode d’inoculation d’autres
trypanosomes. C. R. soc. biol.,61:167-169.</td>
</tr>
<tr class="odd">
<td align="left">article_with_references</td>
<td align="left">References: Trypanosomes</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">LAVERAN, A. and E. MESNIL (translated and revised by
Nabarro).1907 Trypanosomes and trypanosomiases. Chicago. 538 pp., 1 pl.
and 8 textfig.</td>
</tr>
</tbody>
</table>
<p>This example shows several things: <code>file_name</code> is
identical among rows, since it identifies the article and all references
came from one article. The the sample file doesn’t follow a typical
convention (it was published in 1922), therefore there are several
different headings (<code>ref_title</code>). Usually, this is only
“Bibliography” or “References”.</p>
<p>Since the references were not parsed by JSTOR, we only get an
unparsed version. In general, the content of references
(<code>unparsed_refs</code>) is in quite a raw state, quite often the
result of digitising scans via OCR. For example, the last entry reads
like this:
<code>MACHADO, A.1911 Zytologische Untersuchungen fiber Trypanosoma rotatorium ...</code>.
There is an error here: <code>fiber</code> should be <code>über</code>.
The language of the source is German, but the OCR-software assumed
English. Therefore, it didn’t recognize the <em>Umlaut</em>. Similar
errors are common for text read via OCR.</p>
<p>For other files, we can set <code>parse_refs = TRUE</code>, so
references will be imported in their parsed form, whenever they are
available.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">jst_get_references</span>(</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="fu">jst_example</span>(<span class="st">&quot;parsed_references.xml&quot;</span>),</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="at">parse_refs =</span> <span class="cn">TRUE</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table>
<colgroup>
<col width="3%" />
<col width="2%" />
<col width="6%" />
<col width="3%" />
<col width="4%" />
<col width="11%" />
<col width="1%" />
<col width="13%" />
<col width="2%" />
<col width="3%" />
<col width="2%" />
<col width="2%" />
<col width="4%" />
<col width="37%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">file_name</th>
<th align="left">ref_title</th>
<th align="left">ref_authors</th>
<th align="left">ref_editors</th>
<th align="left">ref_collab</th>
<th align="left">ref_item_title</th>
<th align="left">ref_year</th>
<th align="left">ref_source</th>
<th align="left">ref_volume</th>
<th align="left">ref_first_page</th>
<th align="left">ref_last_page</th>
<th align="left">ref_publisher</th>
<th align="left">ref_publication_type</th>
<th align="left">ref_unparsed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">parsed_references</td>
<td align="left">Notes</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">2005</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">other</td>
<td align="left">1. The USA PATRIOT Act expanded the government’s
surveillance power in numerous other ways (see, e.g. Keenan 2005 ).</td>
</tr>
<tr class="even">
<td align="left">parsed_references</td>
<td align="left">References</td>
<td align="left">Acohido, B.; Eisler, P.</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">“Snowden Case: How Low-Level Insider Could Steal from
NSA”</td>
<td align="left">2013</td>
<td align="left">USA Today</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">other</td>
<td align="left">Acohido, B. and Eisler, P. ( 2013 ) “Snowden Case: How
Low-Level Insider Could Steal from NSA” , USA Today , 12 June. Available
online at <a href="http://www.google.com" class="uri">http://www.google.com</a> (accessed 15 June 2013).</td>
</tr>
<tr class="odd">
<td align="left">parsed_references</td>
<td align="left">References</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">Amnesty International</td>
<td align="left">NA</td>
<td align="left">2013</td>
<td align="left">“USA: Revelations about Government Surveillance ‘raise
red flags’”</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">other</td>
<td align="left">Amnesty International ( 2013 ) “USA: Revelations about
Government Surveillance ‘raise red flags’” , 7 June. Available online at
<a href="http://www.google.com" class="uri">http://www.google.com</a>
(accessed 14 June 2013).</td>
</tr>
<tr class="even">
<td align="left">parsed_references</td>
<td align="left">References</td>
<td align="left">Jacobson, D.</td>
<td align="left">D. E. Davis; J. Go</td>
<td align="left">NA</td>
<td align="left">Chapter title</td>
<td align="left">2009</td>
<td align="left">Book title</td>
<td align="left">NA</td>
<td align="left">281</td>
<td align="left">286</td>
<td align="left">Routledge</td>
<td align="left">book</td>
<td align="left">Jacobson, D. , 2009 . Chapter title . In: D. E. Davis
&amp; J. Go , eds. Book title .: Routledge , pp. 281 - 286 .</td>
</tr>
<tr class="odd">
<td align="left">parsed_references</td>
<td align="left">References</td>
<td align="left">Costall, Alan</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">“Some article title”</td>
<td align="left">1980</td>
<td align="left">Theory and Psychology</td>
<td align="left">1</td>
<td align="left">123</td>
<td align="left">145</td>
<td align="left">NA</td>
<td align="left">journal</td>
<td align="left">Costall, Alan ( 1980 ). “Some article title” Theory and
Psychology 1 : 123 – 145 .</td>
</tr>
<tr class="even">
<td align="left">parsed_references</td>
<td align="left">References</td>
<td align="left">Hudson, W.</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">Another article title</td>
<td align="left">2000</td>
<td align="left">Australian Journal of Cats &amp; Dogs</td>
<td align="left">40</td>
<td align="left">134</td>
<td align="left">150</td>
<td align="left">NA</td>
<td align="left">journal</td>
<td align="left">Hudson, W. , 2000 . Another article title . Australian
Journal of Cats &amp; Dogs , September , 40 ( 3 ), p. 134 – 150 .</td>
</tr>
<tr class="odd">
<td align="left">parsed_references</td>
<td align="left">References</td>
<td align="left">Fries-Britt, S.; Griffin, K.A.</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">Some article about race</td>
<td align="left">2000</td>
<td align="left">Journal of College Student Fun</td>
<td align="left">20</td>
<td align="left">60</td>
<td align="left">120</td>
<td align="left">NA</td>
<td align="left">journal</td>
<td align="left">Fries-Britt S. , &amp; Griffin K.A. ( 2000 ). Some
article about race . Journal of College Student Fun , 20 , 60 – 120
.</td>
</tr>
</tbody>
</table>
<p>Note, that there might be other content present like endnotes, in
case the article used endnotes rather than footnotes.</p>
</div>
<div id="jst_get_footnotes" class="section level2">
<h2>jst_get_footnotes</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">jst_get_footnotes</span>(<span class="fu">jst_example</span>(<span class="st">&quot;article_with_references.xml&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">file_name</th>
<th align="left">footnotes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">article_with_references</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>Very commonly, articles either have footnotes or references. The
sample file used here does not have footnotes, therefore a simple
<code>tibble</code> with missing footnotes is returned.</p>
<p>I will use another file to demonstrate footnotes.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>footnotes <span class="ot">&lt;-</span> <span class="fu">jst_get_footnotes</span>(<span class="fu">jst_example</span>(<span class="st">&quot;article_with_footnotes.xml&quot;</span>))</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>footnotes <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">footnotes =</span> stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(footnotes, <span class="st">&quot;</span><span class="sc">\\\n</span><span class="st">&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table>
<colgroup>
<col width="26%" />
<col width="73%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">file_name</th>
<th align="left">footnotes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">article_with_footnotes</td>
<td align="left">[Footnotes]</td>
</tr>
<tr class="even">
<td align="left">article_with_footnotes</td>
<td align="left">9Quarterly, vol. XIII, no. 1,entries for April 19 and
21.</td>
</tr>
<tr class="odd">
<td align="left">article_with_footnotes</td>
<td align="left">10Quarterly, vol. XIII,no. 1, p. 8.</td>
</tr>
<tr class="even">
<td align="left">article_with_footnotes</td>
<td align="left">14Quarterly, vol. VIII, no. 1.Olympia Columbian,
Sept. 11, 1852,</td>
</tr>
<tr class="odd">
<td align="left">article_with_footnotes</td>
<td align="left">26Quarterly, vol. XII,no. 2, p. 141.</td>
</tr>
<tr class="even">
<td align="left">article_with_footnotes</td>
<td align="left">32Dr. David S. Maynard, later (March 31, 1852)</td>
</tr>
<tr class="odd">
<td align="left">article_with_footnotes</td>
<td align="left">34Thomas Linklater, Shepherd, since October 6,
1849,</td>
</tr>
</tbody>
</table>
<p>In general, you might need to combine
<code>jst_get_footnotes()</code> with <code>jst_get_references()</code>
to get all available information on citation data.</p>
</div>
<div id="jst_get_full_text" class="section level2">
<h2>jst_get_full_text</h2>
<p>The function to extract full texts can’t be demonstrated with proper
data, since the full texts are only supplied upon special request with
DfR. The function guesses the encoding of the specified file via
<code>readr::guess_encoding()</code>, reads the whole file and returns a
<code>tibble</code> with <code>file_name</code>, <code>full_text</code>
and <code>encoding</code>.</p>
<p>I created a file that looks similar to files supplied by DfR with
sample text:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>full_text <span class="ot">&lt;-</span> <span class="fu">jst_get_full_text</span>(<span class="fu">jst_example</span>(<span class="st">&quot;full_text.txt&quot;</span>))</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>full_text <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">full_text =</span> stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(full_text, <span class="st">&quot;</span><span class="sc">\\\n</span><span class="st">&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table>
<colgroup>
<col width="2%" />
<col width="96%" />
<col width="1%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">file_name</th>
<th align="left">full_text</th>
<th align="left">encoding</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">full_text</td>
<td align="left"><plain_text> <page sequence="1">Lorem ipsum dolor sit
amet, consectetur adipisici elit, sed eiusmod tempor incidunt ut labore
et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
exercitation ullamco laborisnisi ut aliquid ex ea commodi consequat.
Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu
fugiat nulla pariatur. Excepteur sintobcaecat cupiditat non proident,
sunt in culpa qui officia deserunt mollit animid est laborum.</page>
</plain_text></td>
<td align="left">ASCII</td>
</tr>
</tbody>
</table>
</div>
<div id="combining-results" class="section level2">
<h2>Combining results</h2>
<p>Different parts of meta-data can be combined by using
<code>dplyr::left_join()</code>.</p>
<div id="matching-with-authors" class="section level3">
<h3>Matching with authors</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>meta_data <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">left_join</span>(authors) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="fu">select</span>(file_name, article_title, pub_year, given_name, surname) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  <span class="fu">kable</span>()</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="co">#&gt; Joining, by = &quot;file_name&quot;</span></span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="27%" />
<col width="40%" />
<col width="10%" />
<col width="12%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">file_name</th>
<th align="left">article_title</th>
<th align="right">pub_year</th>
<th align="left">given_name</th>
<th align="left">surname</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">article_with_references</td>
<td align="left">On the Protozoa Parasitic in Frogs</td>
<td align="right">1922</td>
<td align="left">R.</td>
<td align="left">Kudo</td>
</tr>
</tbody>
</table>
</div>
<div id="matching-with-references" class="section level3">
<h3>Matching with references</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>meta_data <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  <span class="fu">left_join</span>(references) <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  <span class="fu">select</span>(file_name, article_title, volume, pub_year, ref_unparsed) <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>  <span class="fu">kable</span>()</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#&gt; Joining, by = &quot;file_name&quot;</span></span></code></pre></div>
<table>
<colgroup>
<col width="10%" />
<col width="15%" />
<col width="3%" />
<col width="3%" />
<col width="67%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">file_name</th>
<th align="left">article_title</th>
<th align="left">volume</th>
<th align="right">pub_year</th>
<th align="left">ref_unparsed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">article_with_references</td>
<td align="left">On the Protozoa Parasitic in Frogs</td>
<td align="left">41</td>
<td align="right">1922</td>
<td align="left">DOBELL, C.C.1909 Researches on the intestinal Protozoa
of frogs and toads. Quart. Jour. Micros.Sc., 53:201-276, 4 pl. and 1
textfig.</td>
</tr>
<tr class="even">
<td align="left">article_with_references</td>
<td align="left">On the Protozoa Parasitic in Frogs</td>
<td align="left">41</td>
<td align="right">1922</td>
<td align="left">1918 Are Entamoeba histolytica and Entamoeba ranarum
the same species? An experi-mental study. Parasit., 10:294-310.</td>
</tr>
<tr class="odd">
<td align="left">article_with_references</td>
<td align="left">On the Protozoa Parasitic in Frogs</td>
<td align="left">41</td>
<td align="right">1922</td>
<td align="left">KUDO, R.1920 Studies on Myxosporidia. A Synopsis of
Genera and Species of Myxosporidia.ill. Biol. Monogr., 5:243-503, 25 pl.
and 2 textfig.</td>
</tr>
<tr class="even">
<td align="left">article_with_references</td>
<td align="left">On the Protozoa Parasitic in Frogs</td>
<td align="left">41</td>
<td align="right">1922</td>
<td align="left">1921 On the nature of structures characteristic of
Cnidosporidian spores. Trans.Micro. Soc., 40:60-74.</td>
</tr>
<tr class="odd">
<td align="left">article_with_references</td>
<td align="left">On the Protozoa Parasitic in Frogs</td>
<td align="left">41</td>
<td align="right">1922</td>
<td align="left">1922 On the morphology and life history of a
Myxosporidian, Leptotheca ohlmacheri,parasitic in Rana clamitans and
Rana pipiens. Parasitology, 14, no. 2.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="books" class="section level1">
<h1>Books</h1>
<p>Quite recently DfR added book chapters to their stack. To import
metadata about the books and chapters, jstor supplies
<code>jst_get_book</code> and <code>jst_get_chapters</code>.</p>
<p><code>jst_get_book</code> is very similar to
<code>jst_get_article</code>. We obtain general information about the
complete book:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">jst_get_book</span>(<span class="fu">jst_example</span>(<span class="st">&quot;book.xml&quot;</span>)) <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="5%" />
<col width="4%" />
<col width="8%" />
<col width="16%" />
<col width="12%" />
<col width="3%" />
<col width="4%" />
<col width="4%" />
<col width="14%" />
<col width="7%" />
<col width="9%" />
<col width="3%" />
<col width="4%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">book_id</th>
<th align="left">file_name</th>
<th align="left">discipline</th>
<th align="left">book_title</th>
<th align="left">book_subtitle</th>
<th align="right">pub_day</th>
<th align="right">pub_month</th>
<th align="right">pub_year</th>
<th align="left">isbn</th>
<th align="left">publisher_name</th>
<th align="left">publisher_location</th>
<th align="right">n_pages</th>
<th align="left">language</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">j.ctt24hdz7</td>
<td align="left">book</td>
<td align="left">Political Science</td>
<td align="left">The 2006 Military Takeover in Fiji</td>
<td align="left">A Coup to End All Coups?</td>
<td align="right">30</td>
<td align="right">4</td>
<td align="right">2009</td>
<td align="left">9781921536502; 9781921536519</td>
<td align="left">ANU E Press</td>
<td align="left">Canberra</td>
<td align="right">NA</td>
<td align="left">eng</td>
</tr>
</tbody>
</table>
<p>A single book might contain many chapters.
<code>jst_get_chapters</code> extracts all of them. Due to this, the
function is a bit slower than most of jstor’s other functions.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>chapters <span class="ot">&lt;-</span> <span class="fu">jst_get_chapters</span>(<span class="fu">jst_example</span>(<span class="st">&quot;book.xml&quot;</span>))</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="fu">str</span>(chapters)</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co">#&gt; tibble [36 × 9] (S3: tbl_df/tbl/data.frame)</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="co">#&gt;  $ book_id        : chr [1:36] &quot;j.ctt24hdz7&quot; &quot;j.ctt24hdz7&quot; &quot;j.ctt24hdz7&quot; &quot;j.ctt24hdz7&quot; ...</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#&gt;  $ file_name      : chr [1:36] &quot;book&quot; &quot;book&quot; &quot;book&quot; &quot;book&quot; ...</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co">#&gt;  $ part_id        : chr [1:36] &quot;j.ctt24hdz7.1&quot; &quot;j.ctt24hdz7.2&quot; &quot;j.ctt24hdz7.3&quot; &quot;j.ctt24hdz7.4&quot; ...</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="co">#&gt;  $ part_label     : chr [1:36] NA NA NA NA ...</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co">#&gt;  $ part_title     : chr [1:36] &quot;Front Matter&quot; &quot;Table of Contents&quot; &quot;Acronyms and abbreviations&quot; &quot;Authors’ biographies&quot; ...</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="co">#&gt;  $ part_subtitle  : chr [1:36] NA NA NA NA ...</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="co">#&gt;  $ authors        : chr [1:36] NA NA NA NA ...</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="co">#&gt;  $ abstract       : chr [1:36] NA NA NA NA ...</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="co">#&gt;  $ part_first_page: chr [1:36] &quot;i&quot; &quot;v&quot; &quot;vii&quot; &quot;xi&quot; ...</span></span></code></pre></div>
<p>Without the abstracts (they are rather long) the first 10 chapters
look like this:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>chapters <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>abstract) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table>
<colgroup>
<col width="7%" />
<col width="6%" />
<col width="9%" />
<col width="7%" />
<col width="31%" />
<col width="22%" />
<col width="5%" />
<col width="10%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">book_id</th>
<th align="left">file_name</th>
<th align="left">part_id</th>
<th align="left">part_label</th>
<th align="left">part_title</th>
<th align="left">part_subtitle</th>
<th align="left">authors</th>
<th align="left">part_first_page</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">j.ctt24hdz7</td>
<td align="left">book</td>
<td align="left">j.ctt24hdz7.1</td>
<td align="left">NA</td>
<td align="left">Front Matter</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">i</td>
</tr>
<tr class="even">
<td align="left">j.ctt24hdz7</td>
<td align="left">book</td>
<td align="left">j.ctt24hdz7.2</td>
<td align="left">NA</td>
<td align="left">Table of Contents</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">v</td>
</tr>
<tr class="odd">
<td align="left">j.ctt24hdz7</td>
<td align="left">book</td>
<td align="left">j.ctt24hdz7.3</td>
<td align="left">NA</td>
<td align="left">Acronyms and abbreviations</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">vii</td>
</tr>
<tr class="even">
<td align="left">j.ctt24hdz7</td>
<td align="left">book</td>
<td align="left">j.ctt24hdz7.4</td>
<td align="left">NA</td>
<td align="left">Authors’ biographies</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">xi</td>
</tr>
<tr class="odd">
<td align="left">j.ctt24hdz7</td>
<td align="left">book</td>
<td align="left">j.ctt24hdz7.5</td>
<td align="left">1.</td>
<td align="left">The enigmas of Fiji’s good governance coup</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">j.ctt24hdz7</td>
<td align="left">book</td>
<td align="left">j.ctt24hdz7.6</td>
<td align="left">2.</td>
<td align="left">‘Anxiety, uncertainty and fear in our land’:</td>
<td align="left">Fiji’s road to military coup, 2006</td>
<td align="left">NA</td>
<td align="left">21</td>
</tr>
<tr class="odd">
<td align="left">j.ctt24hdz7</td>
<td align="left">book</td>
<td align="left">j.ctt24hdz7.7</td>
<td align="left">3.</td>
<td align="left">Fiji’s December 2006 coup:</td>
<td align="left">Who, what, where and why?</td>
<td align="left">NA</td>
<td align="left">43</td>
</tr>
<tr class="even">
<td align="left">j.ctt24hdz7</td>
<td align="left">book</td>
<td align="left">j.ctt24hdz7.8</td>
<td align="left">4.</td>
<td align="left">‘This process of political readjustment’:</td>
<td align="left">The aftermath of the 2006 Fiji Coup</td>
<td align="left">NA</td>
<td align="left">67</td>
</tr>
<tr class="odd">
<td align="left">j.ctt24hdz7</td>
<td align="left">book</td>
<td align="left">j.ctt24hdz7.9</td>
<td align="left">5.</td>
<td align="left">The changing role of the Great Council of Chiefs</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">97</td>
</tr>
<tr class="even">
<td align="left">j.ctt24hdz7</td>
<td align="left">book</td>
<td align="left">j.ctt24hdz7.10</td>
<td align="left">6.</td>
<td align="left">The Fiji military and ethno-nationalism:</td>
<td align="left">Analyzing the paradox</td>
<td align="left">NA</td>
<td align="left">117</td>
</tr>
</tbody>
</table>
<p>Since extracting all authors for all chapters needs considerably more
time, by default authors are not extracted. You can import them like
so:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>author_chap <span class="ot">&lt;-</span> <span class="fu">jst_get_chapters</span>(<span class="fu">jst_example</span>(<span class="st">&quot;book.xml&quot;</span>), <span class="at">authors =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<p>The authors are supplied in a list column:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">class</span>(author_chap<span class="sc">$</span>authors)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;list&quot;</span></span></code></pre></div>
<p>You can expand this list with <code>tidyr::unnest</code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>author_chap <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unnest</span>(authors) <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>  <span class="fu">select</span>(part_id, given_name, surname) <span class="sc">%&gt;%</span> </span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">part_id</th>
<th align="left">given_name</th>
<th align="left">surname</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">j.ctt24hdz7.1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">j.ctt24hdz7.2</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">j.ctt24hdz7.3</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">j.ctt24hdz7.4</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">j.ctt24hdz7.5</td>
<td align="left">Jon</td>
<td align="left">Fraenkel</td>
</tr>
<tr class="even">
<td align="left">j.ctt24hdz7.5</td>
<td align="left">Stewart</td>
<td align="left">Firth</td>
</tr>
<tr class="odd">
<td align="left">j.ctt24hdz7.6</td>
<td align="left">Brij V.</td>
<td align="left">Lal</td>
</tr>
<tr class="even">
<td align="left">j.ctt24hdz7.7</td>
<td align="left">Jon</td>
<td align="left">Fraenkel</td>
</tr>
<tr class="odd">
<td align="left">j.ctt24hdz7.8</td>
<td align="left">Brij V.</td>
<td align="left">Lal</td>
</tr>
<tr class="even">
<td align="left">j.ctt24hdz7.9</td>
<td align="left">Robert</td>
<td align="left">Norton</td>
</tr>
</tbody>
</table>
<p>You can learn more about the concept of list-columns in Hadley
Wickham’s book <a href="https://r4ds.had.co.nz/many-models.html">R for
Data Science</a>.</p>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>See the <a href="https://www.jstor.org/dfr/about/technical-specifications">technical
specifications</a> for more detail.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
