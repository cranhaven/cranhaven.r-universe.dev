---
title: "Map Functions: A Complete Guide"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Map Functions: A Complete Guide}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.width = 7,
  fig.height = 5
)
```

## Overview

SafeMapper provides a complete family of mapping functions that correspond to all common functions in purrr. This article details the usage and best practices for each function.

```{r}
library(SafeMapper)
```

## Function Family Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SafeMapper Map Function Family                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   Single-Input Mapping (s_map family)                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  s_map      â”€â”€â–º returns list                                       â”‚    â”‚
â”‚   â”‚  s_map_chr  â”€â”€â–º returns character vector                           â”‚    â”‚
â”‚   â”‚  s_map_dbl  â”€â”€â–º returns numeric vector                             â”‚    â”‚
â”‚   â”‚  s_map_int  â”€â”€â–º returns integer vector                             â”‚    â”‚
â”‚   â”‚  s_map_lgl  â”€â”€â–º returns logical vector                             â”‚    â”‚
â”‚   â”‚  s_map_dfr  â”€â”€â–º returns data.frame (row-bind)                      â”‚    â”‚
â”‚   â”‚  s_map_dfc  â”€â”€â–º returns data.frame (column-bind)                   â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚   Dual-Input Mapping (s_map2 family)                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  s_map2      â”€â”€â–º iterate two vectors simultaneously                â”‚    â”‚
â”‚   â”‚  s_map2_chr  â”€â”€â–º returns character vector                          â”‚    â”‚
â”‚   â”‚  s_map2_dbl  â”€â”€â–º returns numeric vector                            â”‚    â”‚
â”‚   â”‚  s_map2_int  â”€â”€â–º returns integer vector                            â”‚    â”‚
â”‚   â”‚  s_map2_lgl  â”€â”€â–º returns logical vector                            â”‚    â”‚
â”‚   â”‚  s_map2_dfr  â”€â”€â–º returns data.frame (row-bind)                     â”‚    â”‚
â”‚   â”‚  s_map2_dfc  â”€â”€â–º returns data.frame (column-bind)                  â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚   Multi-Input Mapping                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  s_pmap  â”€â”€â–º iterate multiple vectors (parallel map)               â”‚    â”‚
â”‚   â”‚  s_imap  â”€â”€â–º iterate with index (indexed map)                      â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚   Side-Effect Functions                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  s_walk   â”€â”€â–º execute side effects only, no return                 â”‚    â”‚
â”‚   â”‚  s_walk2  â”€â”€â–º dual-input walk                                      â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## s_map Family: Single-Input Mapping

### s_map - Basic Mapping

```{r}
# Basic usage: returns a list
squares <- s_map(1:5, function(x) x^2)
print(squares)

# Using formula syntax (recommended)
squares <- s_map(1:5, ~ .x^2)
print(unlist(squares))
```

### s_map_chr - Return Character Vector

```{r}
# Convert numbers to formatted strings
labels <- s_map_chr(1:5, ~ paste0("Item_", .x))
print(labels)

# Extract character elements from lists
persons <- list(
  list(name = "Alice", age = 25),
  list(name = "Bob", age = 30),
  list(name = "Carol", age = 28)
)
names <- s_map_chr(persons, ~ .x$name)
print(names)
```

### s_map_dbl - Return Numeric Vector

```{r}
# Calculate square roots
roots <- s_map_dbl(c(1, 4, 9, 16, 25), sqrt)
print(roots)

# Statistical calculations
datasets <- list(
  a = rnorm(100, mean = 0),
  b = rnorm(100, mean = 5),
  c = rnorm(100, mean = 10)
)
means <- s_map_dbl(datasets, mean)
print(means)
```

### s_map_int - Return Integer Vector

```{r}
# Calculate string lengths
words <- c("apple", "banana", "cherry")
lengths <- s_map_int(words, nchar)
print(lengths)

# Count list elements
nested <- list(1:3, 1:5, 1:10)
counts <- s_map_int(nested, length)
print(counts)
```

### s_map_lgl - Return Logical Vector

```{r}
# Check conditions
numbers <- c(2, 5, 8, 12, 15)
is_even <- s_map_lgl(numbers, ~ .x %% 2 == 0)
print(is_even)

# Check for null values
data <- list(a = 1, b = NULL, c = 3, d = NULL)
has_value <- s_map_lgl(data, ~ !is.null(.x))
print(has_value)
```

### s_map_dfr - Return Data Frame (Row-Bind)

```{r}
# Create multiple data frames and row-bind
create_record <- function(id) {
  data.frame(
    id = id,
    value = rnorm(1),
    timestamp = Sys.time()
  )
}

records <- s_map_dfr(1:5, create_record)
print(records)
```

### s_map_dfc - Return Data Frame (Column-Bind)

```{r}
# Create multiple columns and column-bind
create_column <- function(name) {
  df <- data.frame(x = rnorm(3))
  names(df) <- name
  df
}

columns <- s_map_dfc(c("A", "B", "C"), create_column)
print(columns)
```

## s_map2 Family: Dual-Input Mapping

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    s_map2 How It Works                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   .x = [a1, a2, a3, a4, a5]                                     â”‚
â”‚   .y = [b1, b2, b3, b4, b5]                                     â”‚
â”‚                                                                  â”‚
â”‚        â”‚     â”‚     â”‚     â”‚     â”‚                                â”‚
â”‚        â–¼     â–¼     â–¼     â–¼     â–¼                                â”‚
â”‚                                                                  â”‚
â”‚   .f(a1,b1) .f(a2,b2) .f(a3,b3) .f(a4,b4) .f(a5,b5)            â”‚
â”‚                                                                  â”‚
â”‚        â”‚     â”‚     â”‚     â”‚     â”‚                                â”‚
â”‚        â–¼     â–¼     â–¼     â–¼     â–¼                                â”‚
â”‚                                                                  â”‚
â”‚   Result: [r1,   r2,   r3,   r4,   r5]                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### s_map2 Basic Usage

```{r}
# Process two vectors simultaneously
x <- 1:5
y <- 10:14

# Calculate sums
sums <- s_map2(x, y, ~ .x + .y)
print(unlist(sums))

# Calculate products
products <- s_map2_dbl(x, y, ~ .x * .y)
print(products)
```

### Practical Examples

```{r}
# Batch create file paths
dirs <- c("data", "output", "logs")
files <- c("results.csv", "summary.txt", "debug.log")

paths <- s_map2_chr(dirs, files, ~ file.path(.x, .y))
print(paths)

# Compare two vectors
a <- c(1, 5, 3, 8, 2)
b <- c(2, 3, 5, 6, 4)

comparison <- s_map2_chr(a, b, function(x, y) {
  if (x > y) "greater"
  else if (x < y) "less"
  else "equal"
})
print(comparison)
```

## s_pmap: Multi-Input Mapping

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    s_pmap How It Works                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Input list:                                                    â”‚
â”‚   .l = list(                                                     â”‚
â”‚     a = [a1, a2, a3],                                           â”‚
â”‚     b = [b1, b2, b3],                                           â”‚
â”‚     c = [c1, c2, c3]                                            â”‚
â”‚   )                                                              â”‚
â”‚                                                                  â”‚
â”‚        â”‚         â”‚         â”‚                                    â”‚
â”‚        â–¼         â–¼         â–¼                                    â”‚
â”‚                                                                  â”‚
â”‚   .f(a1,b1,c1) .f(a2,b2,c2) .f(a3,b3,c3)                       â”‚
â”‚                                                                  â”‚
â”‚        â”‚         â”‚         â”‚                                    â”‚
â”‚        â–¼         â–¼         â–¼                                    â”‚
â”‚                                                                  â”‚
â”‚   Result: [r1,      r2,      r3]                                â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### s_pmap Basic Usage

```{r}
# Use named parameter list
params <- list(
  x = 1:3,
  y = 4:6,
  z = 7:9
)

# Calculate x + y * z
results <- s_pmap(params, function(x, y, z) x + y * z)
print(unlist(results))
```

### Combining with Data Frames

```{r}
# Iterate over data frame rows
df <- data.frame(
  name = c("Alice", "Bob", "Carol"),
  age = c(25, 30, 28),
  city = c("New York", "London", "Tokyo")
)

# Create description for each row
descriptions <- s_pmap(df, function(name, age, city) {
  sprintf("%s is %d years old and lives in %s", name, age, city)
})
print(unlist(descriptions))
```

## s_imap: Indexed Mapping

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    s_imap How It Works                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Named vector:                     Unnamed vector:              â”‚
â”‚   .x = c(a=10, b=20, c=30)         .x = c(10, 20, 30)           â”‚
â”‚                                                                  â”‚
â”‚   In .f(.x, .y):                   In .f(.x, .y):               â”‚
â”‚   .x = value                       .x = value                    â”‚
â”‚   .y = name                        .y = position index           â”‚
â”‚                                                                  â”‚
â”‚   .f(10, "a")                      .f(10, 1)                     â”‚
â”‚   .f(20, "b")                      .f(20, 2)                     â”‚
â”‚   .f(30, "c")                      .f(30, 3)                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### s_imap Basic Usage

```{r}
# Use named vector
scores <- c(math = 85, english = 92, science = 78)

report <- s_imap(scores, ~ sprintf("%s: %d points", .y, .x))
print(unlist(report))

# Use unnamed vector (get position index)
items <- c("apple", "banana", "cherry")

indexed <- s_imap(items, ~ sprintf("[%s] %s", .y, .x))
print(unlist(indexed))
```

## s_walk Family: Side-Effect Functions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    s_walk vs s_map                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   s_map:                                                         â”‚
â”‚   â”œâ”€â”€ Execute function                                          â”‚
â”‚   â”œâ”€â”€ Collect return values                                     â”‚
â”‚   â””â”€â”€ Return result list                                        â”‚
â”‚                                                                  â”‚
â”‚   s_walk:                                                        â”‚
â”‚   â”œâ”€â”€ Execute function (usually side effects)                   â”‚
â”‚   â”œâ”€â”€ Ignore return values                                      â”‚
â”‚   â””â”€â”€ Return input (for piping)                                 â”‚
â”‚                                                                  â”‚
â”‚   Use cases:                                                     â”‚
â”‚   â”œâ”€â”€ Writing to files                                          â”‚
â”‚   â”œâ”€â”€ Printing output                                           â”‚
â”‚   â”œâ”€â”€ Sending network requests (don't care about response)      â”‚
â”‚   â””â”€â”€ Updating databases                                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### s_walk Basic Usage

```{r}
# Print output
s_walk(1:3, ~ cat("Processing item", .x, "\n"))

# Can be used in pipelines
result <- 1:5 |>
  s_walk(~ cat("Checking", .x, "...\n")) |>
  # s_walk returns original input, can continue processing

sum()

print(paste("Sum:", result))
```

### s_walk2 Dual-Input Side Effects

```{r}
# Batch write (example: print instead of actual write)
files <- c("file1.txt", "file2.txt", "file3.txt")
contents <- c("Content A", "Content B", "Content C")

s_walk2(files, contents, function(f, c) {
  cat(sprintf("Would write to %s: '%s'\n", f, c))
})
```

## Function Parameter Passing

All `s_map` family functions support passing additional arguments via `...`:

```{r}
# Pass additional arguments to function
data <- list(
  c(1, 2, NA, 4),
  c(5, NA, 7, 8),
  c(9, 10, 11, NA)
)

# Pass na.rm = TRUE to mean function
means <- s_map_dbl(data, mean, na.rm = TRUE)
print(means)

# Multiple additional arguments
rounded <- s_map_dbl(c(1.234, 2.567, 3.891), round, digits = 1)
print(rounded)
```

## Session ID Usage

All mapping functions support the `.session_id` parameter:

```{r}
# Auto-generate session ID (recommended for most scenarios)
result1 <- s_map(1:10, ~ .x^2)

# Manually specify session ID (for precise control scenarios)
result2 <- s_map(1:10, ~ .x^2, .session_id = "my_calculation_v1")

# Different session IDs don't affect each other
result3 <- s_map(1:10, ~ .x^2, .session_id = "my_calculation_v2")
```

## Performance Considerations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Performance Optimization Tips                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   1. Batch Size Selection                                        â”‚
â”‚      â”œâ”€â”€ Fast ops (< 10ms/item): batch_size = 500-1000          â”‚
â”‚      â”œâ”€â”€ Medium ops (10-100ms/item): batch_size = 100 (default) â”‚
â”‚      â””â”€â”€ Slow ops (> 100ms/item): batch_size = 10-50            â”‚
â”‚                                                                  â”‚
â”‚   2. Choose Appropriate Output Type                              â”‚
â”‚      â”œâ”€â”€ s_map: Most flexible, but more memory                  â”‚
â”‚      â””â”€â”€ s_map_dbl/chr/lgl: More compact, better performance    â”‚
â”‚                                                                  â”‚
â”‚   3. Use Parallel Versions                                       â”‚
â”‚      â”œâ”€â”€ CPU-intensive tasks â”€â”€â–º s_future_map                   â”‚
â”‚      â””â”€â”€ I/O-intensive tasks â”€â”€â–º Usually no parallelism needed  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Common Patterns

### Pattern 1: Data Transformation Pipeline

```{r}
# Use pipeline for data transformation
data <- 1:10

result <- data |>
  s_map_dbl(~ .x^2) |>     # Square
  s_map_dbl(~ .x + 10) |>  # Add 10
  s_map_chr(~ sprintf("%.1f", .x))  # Format

print(result)
```

### Pattern 2: Conditional Processing

```{r}
# Execute different operations based on conditions
values <- c(-2, 0, 3, -5, 7)

processed <- s_map_dbl(values, function(x) {
  if (x < 0) abs(x) * 2
  else x^2
})
print(processed)
```

### Pattern 3: Safe NULL Handling

```{r}
# Handle data that might contain NULLs
data <- list(a = 1, b = NULL, c = 3, d = NULL, e = 5)

# Use s_map with conditional check
safe_values <- s_map_dbl(data, ~ if (is.null(.x)) NA_real_ else .x)
print(safe_values)
```

## Next Steps

- âš¡ [Parallel Processing](parallel-processing.html) - Speed up with s_future_map
- ğŸ›¡ï¸ [Error Handling](error-handling.html) - Use s_safely/s_possibly
- ğŸ“‹ [Session Management](session-management.html) - Manage checkpoints and config
